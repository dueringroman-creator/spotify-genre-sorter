<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Playlist Alchemist - Smart Spotify Playlist Creator</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- HEADER (Compact) -->
  <header class="app-header">
    <div class="header-left">
      <h1>Playlist Alchemist</h1>
    </div>
    <div class="header-right">
      <button id="help-button" class="btn-icon" title="Help">?</button>
      <button id="logout" class="btn-text" style="display: none;">Logout</button>
    </div>
  </header>

  <!-- LOGIN SECTION (Landing Page) -->
  <div id="login-section" class="landing-page">
    <div class="landing-container">
      <div class="landing-hero">
        <h1 class="hero-title">Playlist Alchemist</h1>
        <p class="hero-subtitle">
          Your music library has potential.<br>
          We help you unlock it.
        </p>
        <p class="hero-tagline">Build playlists from your own library with smart filters</p>
      </div>
      
      <button id="login" class="btn-hero">Get Started</button>
      
      <div class="landing-features">
        <div class="feature-item">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 6v6l4 2"/>
            </svg>
          </div>
          <p>Save hours of manual sorting</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 12h18M3 6h18M3 18h18"/>
            </svg>
          </div>
          <p>Filter by BPM, energy, mood</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
          </div>
          <p>Your music, fully organized</p>
        </div>
      </div>
    </div>
  </div>

  <!-- MAIN APP SECTION (Hidden until logged in) -->
  <div id="app-section" class="app-container" style="display: none;">
    
    <!-- SPLIT VIEW LAYOUT -->
    <div class="split-layout">
      
      <!-- ========== LEFT PANEL: SELECT (70%) ========== -->
      <div class="left-panel">
        
        <!-- STEP 1: Load Library -->
        <section class="load-section">
          <h2 class="section-title">Step 1: Load Your Library</h2>
          
          <!-- Source Selection (Inline Pills) -->
          <div class="source-selector">
            <label class="source-option">
              <input type="radio" name="data-source" value="liked-songs" checked>
              <span>Liked Songs</span>
            </label>
            <label class="source-option">
              <input type="radio" name="data-source" value="top-artists">
              <span>Top Artists</span>
            </label>
            <label class="source-option">
              <input type="radio" name="data-source" value="playlists">
              <span>Playlists</span>
            </label>
          </div>
          
          <!-- Timeframe Pills (Only for Liked Songs) -->
          <div id="timeframe-pills" class="timeframe-pills">
            <span class="timeframe-label">Period:</span>
            <label class="timeframe-option">
              <input type="radio" name="timeframe" value="all" checked>
              <span>All</span>
            </label>
            <label class="timeframe-option">
              <input type="radio" name="timeframe" value="year">
              <span>Year</span>
            </label>
            <label class="timeframe-option">
              <input type="radio" name="timeframe" value="6months">
              <span>6mo</span>
            </label>
            <label class="timeframe-option">
              <input type="radio" name="timeframe" value="month">
              <span>Month</span>
            </label>
          </div>
          
          <!-- Load Button -->
          <button id="load-library-btn" class="btn-primary btn-large">
            Load Library
          </button>
          
          <!-- Progress Bar -->
          <div id="load-progress-container" class="progress-container" style="display: none;">
            <div class="progress-bar">
              <div id="load-progress-fill" class="progress-fill"></div>
            </div>
            <div id="load-progress-text" class="progress-text">Loading...</div>
          </div>
        </section>

        <!-- STEP 2: Select Genres (Hidden until loaded) -->
        <section id="genre-section" class="genre-section" style="display: none;">
          <h2 class="section-title">Step 2: Select Genres</h2>
          
          <!-- Search -->
          <input type="text" id="genre-search" class="genre-search" placeholder="Search genres...">
          
          <!-- Genre Grid -->
          <div id="genre-grid" class="genre-grid">
            <!-- Populated dynamically by JavaScript -->
          </div>
        </section>
        
      </div>
      
      <!-- ========== RIGHT PANEL: BUILD (30%) ========== -->
      <div class="right-panel">
        
        <!-- Playlist Name -->
        <div class="input-group">
          <label class="input-label">Playlist Name</label>
          <input type="text" id="playlist-name" class="input-text" 
                 placeholder="My Playlist" value="My Playlist">
        </div>
        
        <!-- Selection Summary -->
        <div class="panel-section">
          <h3 class="panel-title">Selected Genres</h3>
          <div id="selected-genres-list" class="selected-list">
            <div class="empty-state">No genres selected yet</div>
          </div>
        </div>
        
        <!-- Totals -->
        <div class="totals-grid">
          <div class="total-item">
            <span class="total-label">Tracks</span>
            <span id="total-tracks" class="total-value">0</span>
          </div>
          <div class="total-item">
            <span class="total-label">Duration</span>
            <span id="total-duration" class="total-value">0m</span>
          </div>
        </div>
        
        <!-- Clear Button -->
        <button id="clear-selection-btn" class="btn-secondary btn-full" disabled>
          Clear All
        </button>
        
        <!-- Advanced Filters (Collapsed) -->
        <details class="filters-section">
          <summary class="filters-toggle">
            <svg class="filter-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="4" y1="6" x2="20" y2="6"/>
              <line x1="4" y1="12" x2="20" y2="12"/>
              <line x1="4" y1="18" x2="20" y2="18"/>
              <circle cx="8" cy="6" r="2" fill="currentColor"/>
              <circle cx="16" cy="12" r="2" fill="currentColor"/>
              <circle cx="12" cy="18" r="2" fill="currentColor"/>
            </svg>
            Advanced Filters
          </summary>
          <div class="filters-content">
            
            <!-- BPM -->
            <div class="filter-group">
              <label class="filter-label">BPM</label>
              <div class="filter-range">
                <input type="range" id="bpm-min" class="range-slider" min="0" max="200" value="0">
                <input type="range" id="bpm-max" class="range-slider" min="0" max="200" value="200">
              </div>
              <div class="filter-display" id="bpm-display">0 - 200 BPM</div>
            </div>
            
            <!-- Energy -->
            <div class="filter-group">
              <label class="filter-label">Energy</label>
              <div class="filter-range">
                <input type="range" id="energy-min" class="range-slider" min="0" max="100" value="0">
                <input type="range" id="energy-max" class="range-slider" min="0" max="100" value="100">
              </div>
              <div class="filter-display" id="energy-display">All levels</div>
            </div>
            
            <!-- Mood -->
            <div class="filter-group">
              <label class="filter-label">Mood</label>
              <div class="filter-range">
                <input type="range" id="mood-min" class="range-slider" min="0" max="100" value="0">
                <input type="range" id="mood-max" class="range-slider" min="0" max="100" value="100">
              </div>
              <div class="filter-display" id="mood-display">All moods</div>
            </div>
            
            <!-- Vocal Type -->
            <div class="filter-group">
              <label class="filter-label">Vocals</label>
              <select id="vocal-type" class="filter-select">
                <option value="any">Any</option>
                <option value="instrumental">Instrumental Only</option>
                <option value="vocal">With Vocals</option>
              </select>
            </div>
            
            <!-- Duration -->
            <div class="filter-group">
              <label class="filter-label">Target Duration</label>
              <select id="duration-target" class="filter-select">
                <option value="3600">1 hour</option>
                <option value="5400">1.5 hours</option>
                <option value="7200">2 hours</option>
                <option value="10800">3 hours</option>
                <option value="14400">4 hours</option>
              </select>
            </div>
            
          </div>
        </details>
        
        <!-- Action Buttons -->
        <div class="action-buttons">
          <button id="preview-btn" class="btn-secondary btn-full" disabled>
            Preview Tracks
          </button>
          <button id="create-btn" class="btn-primary btn-full" disabled>
            Create Playlist
          </button>
        </div>
        
      </div>
      
    </div>
  </div>

  <!-- PREVIEW MODAL -->
  <div id="preview-modal" class="modal" style="display: none;">
    <div class="modal-overlay" onclick="closePreviewModal()"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>Preview Tracks</h2>
        <button class="modal-close" onclick="closePreviewModal()">×</button>
      </div>
      <div class="modal-body">
        <div id="preview-tracks-list" class="preview-list">
          <!-- Populated by JavaScript -->
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closePreviewModal()">Close</button>
        <button id="create-from-preview" class="btn-primary">Create Playlist</button>
      </div>
    </div>
  </div>

  <!-- ONBOARDING MODAL -->
  <div id="onboarding-modal" class="modal" style="display: none;">
    <div class="modal-overlay"></div>
    <div class="modal-content modal-sm">
      <div class="modal-header">
        <h2>Welcome to Playlist Alchemist</h2>
        <button class="modal-close" onclick="closeOnboarding()">×</button>
      </div>
      <div class="modal-body">
        <p class="modal-intro">
          Build better playlists from your own library. No algorithm guessing—just your music, 
          organized the way you want it.
        </p>
        <div class="steps-list">
          <h3>How it works:</h3>
          <ol>
            <li>Load your library (one time)</li>
            <li>Pick genres or apply filters</li>
            <li>Preview what you'll get</li>
            <li>Create playlist in seconds</li>
          </ol>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeOnboarding()">Skip</button>
        <button class="btn-primary" onclick="closeOnboarding()">Got It</button>
      </div>
    </div>
  </div>

  <!-- SUCCESS NOTIFICATION -->
  <div id="success-notification" class="notification" style="display: none;">
    <div class="notification-content">
      <svg class="notification-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
        <polyline points="20 6 9 17 4 12"/>
      </svg>
      <span class="notification-text" id="notification-text">Playlist created!</span>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
